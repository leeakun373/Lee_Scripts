# RadialMenu Tool - 用户手册

欢迎使用 RadialMenu Tool！这是一份详细的使用指南，帮助你快速上手并充分利用这个强大的轮盘菜单工具。

---

## 📋 目录

1. [快速开始](#快速开始)
2. [基本使用](#基本使用)
3. [配置菜单](#配置菜单)
4. [高级功能](#高级功能)
5. [常见问题](#常见问题)
6. [技巧与建议](#技巧与建议)

---

## 🚀 快速开始

### 安装要求

在使用 RadialMenu Tool 之前，请确保：

1. **REAPER 6.0 或更高版本**
2. **ReaImGui 扩展**（必需）
   - 打开 REAPER
   - 进入 `Extensions > ReaPack > Browse Packages`
   - 搜索 "ReaImGui"
   - 右键点击 "ReaImGui: ReaScript binding for Dear ImGui"
   - 选择 "Install"
   - 重启 REAPER

### 安装步骤

1. **复制脚本文件夹**
   - 将整个 `RadialMenu_Tool` 文件夹复制到 REAPER 的 Scripts 目录：
     - **Windows**: `%APPDATA%\REAPER\Scripts\`
     - **macOS**: `~/Library/Application Support/REAPER/Scripts/`
     - **Linux**: `~/.config/REAPER/Scripts/`

2. **加载脚本**
   - 打开 REAPER
   - 进入 `Actions > Show action list`
   - 点击 "New action" > "Load ReaScript..."
   - 选择 `Lee_RadialMenu.lua`（主菜单）
   - 选择 `Lee_RadialMenu_Setup.lua`（设置编辑器）

3. **设置快捷键（推荐）**
   - 在 Action List 中找到 `Lee_RadialMenu.lua`
   - 右键选择 "Set key shortcut"
   - 设置一个容易按的快捷键（例如：`Shift+Space` 或 `Ctrl+Alt+R`）

---

## 🎮 基本使用

### 启动轮盘菜单

有两种方式启动轮盘菜单：

1. **快捷键方式**（推荐）
   - 按下你设置的快捷键
   - 轮盘菜单会立即出现在屏幕上

2. **手动运行**
   - 打开 `Actions > Show action list`
   - 找到并运行 `Lee_RadialMenu.lua`

### 轮盘界面说明

轮盘菜单由以下部分组成：

- **扇区**：圆形菜单被分成多个扇区，每个扇区代表一个功能类别
- **中心圆**：点击中心圆可以固定菜单窗口（Pin 模式）
- **子菜单**：点击或悬停扇区会显示该扇区的子菜单

### 基本操作流程

1. **打开菜单**
   - 按下快捷键或运行脚本
   - 轮盘菜单出现在屏幕上

2. **选择扇区**
   - 将鼠标移动到目标扇区上
   - 扇区会高亮显示（变亮）

3. **打开子菜单**
   - **点击模式**（默认）：点击扇区打开子菜单
   - **悬停模式**：将鼠标悬停在扇区上自动打开子菜单
   - 可以在设置编辑器中切换模式

4. **执行操作**
   - 在子菜单中点击你想要的操作
   - 操作执行后，菜单会自动关闭（除非已 Pin）

5. **关闭菜单**
   - 点击空白区域
   - 按 `ESC` 键
   - 再次点击已打开的扇区

### Pin 模式（固定菜单）

Pin 模式允许你固定菜单窗口，方便多次操作：

1. **启用 Pin 模式**
   - 点击轮盘的中心圆
   - 菜单窗口会被固定，不会自动关闭

2. **使用 Pin 模式**
   - 可以连续执行多个操作
   - 菜单保持打开状态
   - 适合需要频繁切换不同扇区的场景

3. **取消 Pin 模式**
   - 再次点击中心圆
   - 或关闭菜单窗口

---

## ⚙️ 配置菜单

### 打开设置编辑器

有两种方式打开设置编辑器：

1. **从 Action List**
   - 打开 `Actions > Show action list`
   - 找到并运行 `Lee_RadialMenu_Setup.lua`

2. **设置快捷键**（推荐）
   - 为 `Lee_RadialMenu_Setup.lua` 设置一个快捷键
   - 方便随时编辑配置

### 设置编辑器界面

设置编辑器分为两个主要区域：

#### 左侧：轮盘预览

- **实时预览**：显示当前配置的轮盘外观
- **扇区选择**：点击扇区选择要编辑的扇区
- **扇区信息**：显示扇区名称、图标、颜色

#### 右侧：插槽网格

- **插槽网格**：显示选中扇区的所有插槽（最多 9 个）
- **空插槽**：显示为灰色，可以添加新项目
- **已配置插槽**：显示为亮色，显示项目名称

### 添加 Actions（REAPER 命令）

1. **打开 Action 浏览器**
   - 在设置编辑器中，点击插槽网格中的空插槽
   - 或点击已配置的插槽进行编辑

2. **查找 Action**
   - 使用搜索框输入关键词（支持模糊搜索）
   - 浏览 Action 列表找到目标命令

3. **添加 Action**
   - **方法 1：拖拽**（推荐）
     - 从 Action 浏览器中拖拽 Action 到目标插槽
   - **方法 2：点击**
     - 在 Action 浏览器中选择 Action
     - 点击 "Add" 按钮

4. **查找 Command ID**
   - 如果知道 Command ID，可以直接在配置文件中添加
   - 在 REAPER 的 Action List 中：
     - 右键点击 Action
     - 选择 "Copy selected action command ID"

### 添加 FX（效果器）

1. **打开 FX 浏览器**
   - 在设置编辑器中，点击插槽网格中的空插槽
   - 选择 "Add FX" 选项

2. **选择 FX 类型**
   - 浏览器支持分类过滤：
     - **All**：所有 FX
     - **VST**：VST 插件
     - **VST3**：VST3 插件
     - **JS**：REAPER 内置 JS 效果器
     - **AU**：Audio Unit（仅 macOS）
     - **CLAP**：CLAP 插件
     - **LV2**：LV2 插件
     - **Chain**：FX Chain
     - **Template**：FX Template

3. **添加 FX**
   - **方法 1：拖拽**（推荐）
     - 从 FX 浏览器中拖拽 FX 到目标插槽
   - **方法 2：点击**
     - 在 FX 浏览器中选择 FX
     - 点击 "Add" 按钮

4. **智能上下文检测**
   - RadialMenu Tool 会自动检测你的操作上下文
   - 如果选中了 Item，FX 会添加到 Item 的 Take
   - 如果选中了 Track，FX 会添加到 Track
   - 如果都没有选中，会提示你选择目标

### 添加 Scripts（脚本）

1. **选择脚本类型**
   - 在设置编辑器中，点击插槽网格中的空插槽
   - 选择 "Add Script" 选项

2. **选择脚本文件**
   - 浏览文件系统找到目标脚本文件
   - 支持 `.lua`、`.eel`、`.py` 等格式

3. **配置脚本**
   - 输入脚本的显示名称
   - 脚本路径会自动保存

### 编辑扇区

1. **选择扇区**
   - 在左侧预览中点击要编辑的扇区

2. **编辑扇区属性**
   - **名称**：修改扇区显示名称
   - **图标**：修改扇区图标（支持 Emoji）
   - **颜色**：修改扇区颜色（RGBA 格式）

3. **清除扇区**
   - 点击 "清除整个扇区" 按钮
   - 会清空该扇区的所有插槽

### 重新排列插槽

1. **拖拽重新排列**
   - 在插槽网格中，可以拖拽插槽进行重新排列
   - 拖拽已配置的插槽到其他位置
   - 拖拽空插槽到其他位置

2. **删除插槽**
   - 右键点击插槽
   - 选择 "Delete" 或 "Clear"

### 保存配置

- **自动保存**：设置编辑器会自动保存配置
- **手动保存**：点击 "Save" 按钮（如果可用）
- **配置文件位置**：`RadialMenu_Tool/config.json`

---

## 🎯 高级功能

### 悬停模式 vs 点击模式

轮盘菜单支持两种打开子菜单的方式：

1. **点击模式**（默认）
   - `hover_to_open: false`
   - 需要点击扇区才能打开子菜单
   - 适合精确控制

2. **悬停模式**
   - `hover_to_open: true`
   - 鼠标悬停在扇区上自动打开子菜单
   - 适合快速操作

**切换方式**：
- 在设置编辑器中修改 `hover_to_open` 设置
- 或直接编辑 `config.json` 文件

### 智能 FX 挂载

RadialMenu Tool 具有智能上下文检测功能：

1. **优先级顺序**
   - 选中的 Item（最高优先级）
   - 选中的 Track
   - 如果都没有，会显示提示

2. **自动检测**
   - 当你点击 FX 时，工具会自动检测：
     - 是否有选中的 Item
     - 是否有选中的 Track
     - Item 是否有有效的 Take

3. **自动打开 FX 窗口**
   - 添加 FX 后，会自动打开 FX 窗口
   - 方便你立即调整参数

### 子菜单智能定位

子菜单会自动调整位置，确保始终在屏幕内：

- **边界检测**：检测屏幕左右边界
- **自动调整**：如果靠近右边界，子菜单会显示在左侧
- **上下调整**：如果靠近底部，子菜单会向上调整

### 模糊搜索

在设置编辑器中，支持模糊搜索：

- **Action 搜索**：输入关键词快速查找 Action
- **FX 搜索**：输入 FX 名称快速查找
- **智能匹配**：支持部分匹配和相似度匹配

---

## ❓ 常见问题

### Q1: 轮盘菜单不显示

**可能原因**：
- ReaImGui 未安装
- 脚本路径错误

**解决方法**：
1. 检查 ReaImGui 是否已安装（见安装要求）
2. 确认脚本文件在正确的目录
3. 查看 REAPER 控制台是否有错误信息

### Q2: 点击扇区没有反应

**可能原因**：
- 扇区没有配置插槽
- 配置文件格式错误

**解决方法**：
1. 打开设置编辑器检查扇区是否有插槽
2. 检查 `config.json` 文件格式是否正确
3. 尝试删除 `config.json` 让脚本重新生成默认配置

### Q3: FX 添加失败

**可能原因**：
- FX 名称错误
- FX 未安装
- 没有选择目标（Track 或 Item）

**解决方法**：
1. 检查 FX 名称是否正确（包括前缀，如 "VST3: "）
2. 确认 FX 已正确安装
3. 在添加 FX 前，先选择目标 Track 或 Item

### Q4: 子菜单位置不对

**可能原因**：
- 屏幕分辨率问题
- 窗口位置异常

**解决方法**：
1. 子菜单会自动调整位置，通常不需要手动调整
2. 如果问题持续，尝试移动轮盘窗口到屏幕中央

### Q5: 配置文件丢失

**解决方法**：
1. 删除 `config.json` 文件
2. 重新运行脚本，会自动生成默认配置
3. 或从 `config.example.json` 复制并重命名

### Q6: 快捷键冲突

**解决方法**：
1. 在 REAPER 的 Action List 中检查快捷键冲突
2. 为 RadialMenu Tool 选择其他快捷键
3. 避免使用系统快捷键（如 `Ctrl+C`）

---

## 💡 技巧与建议

### 工作流程优化

1. **常用操作优先**
   - 将最常用的 Actions 放在第一个扇区
   - 将最常用的 FX 放在第二个扇区

2. **分类组织**
   - 按功能分类组织扇区
   - 例如：编辑操作、FX、脚本等

3. **使用 Pin 模式**
   - 在需要连续操作时使用 Pin 模式
   - 避免频繁打开/关闭菜单

### 性能优化

1. **减少插槽数量**
   - 每个扇区最多 9 个插槽
   - 建议每个扇区 3-6 个最常用的操作

2. **使用悬停模式**
   - 如果经常使用，可以启用悬停模式
   - 减少点击操作，提高效率

### 自定义建议

1. **颜色方案**
   - 根据你的 REAPER 主题调整扇区颜色
   - 使用对比度高的颜色提高可读性

2. **图标选择**
   - 使用有意义的 Emoji 图标
   - 保持图标简洁明了

3. **配置文件备份**
   - 定期备份 `config.json` 文件
   - 可以创建多个配置文件用于不同场景

### 故障排除

1. **查看控制台**
   - 打开 REAPER 控制台查看错误信息
   - 大多数错误会在控制台显示

2. **重置配置**
   - 如果遇到问题，可以删除 `config.json`
   - 脚本会重新生成默认配置

3. **检查依赖**
   - 确保 ReaImGui 是最新版本
   - 确保 REAPER 版本符合要求

---

## 📚 相关资源

- **REAPER 官网**: https://www.reaper.fm/
- **ReaImGui 文档**: https://github.com/cfillion/reaimgui
- **REAPER 脚本开发文档**: https://www.reaper.fm/sdk/reascript/reascripthelp.html

---

## 📝 更新日志

查看 `CHANGELOG.md` 了解详细的更新历史。

---

## 🤝 支持

如果遇到问题或有建议，请：

1. 查看本文档的常见问题部分
2. 检查配置文件是否正确
3. 查看 REAPER 控制台的错误信息

---

**祝你使用愉快！** 🎉

