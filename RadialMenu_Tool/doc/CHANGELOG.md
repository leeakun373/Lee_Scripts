# 更新日志

## [1.1.0] - 2024-12-20

### 新增功能
- ✨ 添加 Chain（效果链）类型支持 - 可在类型菜单中选择，行为与 FX 相同
- ✨ 添加 Template（轨道模板）类型支持 - 可在类型菜单中选择

### 修复问题
- 🐛 修复轮盘拖拽功能失效的问题 - 恢复手动拖拽检测机制
- 🐛 修复子菜单点击后闪烁消失的问题 - 改进子菜单悬停检测逻辑
- 🐛 修复点击子菜单外位置导致子菜单意外关闭的问题 - 优化点击检测逻辑

### 改进
- 🎨 移除未使用的 Script 类型 - 简化类型选项
- 🎨 移除插槽描述字段 - 简化界面，直接使用插槽名称
- 🏗️ 重构设置界面代码结构 - 将 2161 行的 main_settings.lua 拆分为多个模块化组件
  - `tab_preview.lua` - 预览面板模块
  - `tab_grid.lua` - 网格编辑器模块
  - `tab_inspector.lua` - 属性编辑栏模块
  - `tab_browser.lua` - 资源浏览器模块
  - `tab_presets.lua` - 预设管理模块
- 📦 改进代码可维护性 - 每个模块独立维护，AI 友好性提升

### 技术改进
- 🔧 优化拖拽检测逻辑 - 使用 IsItemActive + IsMouseDragging + 距离阈值
- 🔧 改进子菜单悬停检测 - 添加活动项检测，确保点击按钮时窗口保持悬停状态
- 🔧 统一状态管理 - 使用中央 state 对象管理所有共享状态

## [1.0.0] - 2024-12-09

### 新增功能
- ✨ 完整的轮盘菜单系统
- ✨ 可视化设置编辑器
- ✨ 支持 Actions、FX、Chains、Templates
- ✨ 拖拽功能（从浏览器拖放到插槽）
- ✨ 内部网格交换（拖拽插槽进行重新排列）
- ✨ 悬停打开/点击打开模式
- ✨ Pin 模式（固定菜单窗口）
- ✨ FX 浏览器（分类过滤：All, VST, VST3, JS, AU, CLAP, LV2, Chain, Template）
- ✨ 智能上下文检测（自动判断添加到 Track 还是 Item）
- ✨ 精致的 UI 设计（深色主题）

### 改进
- 🎨 优化预览区域（移除底部大红按钮，添加精致悬浮按钮）
- 🎨 改进网格视觉对比（已配置按钮更亮，空插槽更暗）
- 🎨 紧凑的 FX 浏览器布局
- 🐛 修复拖拽反馈可见性问题（使用 Tooltip 防止被窗口裁切）
- 🐛 修复拖拽与悬停打开逻辑冲突
- 🐛 修复子菜单点击时意外关闭的问题
- 🐛 修复 Item 和 Track 检测逻辑（使用 GetItemFromPoint）
- 🔇 静默模式（移除所有控制台输出）

### 技术改进
- 📦 模块化架构（GUI/Logic/Data 清晰分离）
- 📦 高性能列表渲染（使用 ListClipper）
- 📦 缓存机制（FX、Chains、Templates）
- 📦 完整的错误处理

### 文档
- 📚 完整的 README.md
- 📚 实现文档和开发笔记
- 📚 GitHub 上传指南


